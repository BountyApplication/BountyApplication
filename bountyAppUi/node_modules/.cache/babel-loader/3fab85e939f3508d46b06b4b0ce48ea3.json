{"ast":null,"code":"import { ZXingHtml5QrcodeDecoder } from \"./zxing-html5-qrcode-decoder\";\nimport { BarcodeDetectorDelegate } from \"./native-bar-code-detector\";\n\nvar Html5QrcodeShim = function () {\n  function Html5QrcodeShim(requestedFormats, verbose, logger, experimentalFeatureConfig) {\n    this.EXECUTIONS_TO_REPORT_PERFORMANCE = 100;\n    this.executions = 0;\n    this.executionResults = [];\n    this.verbose = verbose;\n\n    if (experimentalFeatureConfig.useBarCodeDetectorIfSupported === true && BarcodeDetectorDelegate.isSupported()) {\n      this.decoder = new BarcodeDetectorDelegate(requestedFormats, verbose, logger);\n    } else {\n      this.decoder = new ZXingHtml5QrcodeDecoder(requestedFormats, verbose, logger);\n    }\n  }\n\n  Html5QrcodeShim.prototype.decodeAsync = function (canvas) {\n    var _this = this;\n\n    var start = performance.now();\n    return this.decoder.decodeAsync(canvas).finally(function () {\n      if (_this.verbose) {\n        var executionTime = performance.now() - start;\n\n        _this.executionResults.push(executionTime);\n\n        _this.executions++;\n\n        _this.possiblyFlushPerformanceReport();\n      }\n    });\n  };\n\n  Html5QrcodeShim.prototype.possiblyFlushPerformanceReport = function () {\n    if (this.executions < this.EXECUTIONS_TO_REPORT_PERFORMANCE) {\n      return;\n    }\n\n    var sum = 0;\n\n    for (var _i = 0, _a = this.executionResults; _i < _a.length; _i++) {\n      var executionTime = _a[_i];\n      sum += executionTime;\n    }\n\n    var mean = sum / this.executionResults.length;\n    console.log(mean + \" ms for \" + this.executionResults.length + \" last runs.\");\n    this.executions = 0;\n    this.executionResults = [];\n  };\n\n  return Html5QrcodeShim;\n}();\n\nexport { Html5QrcodeShim };","map":{"version":3,"mappings":"AAiBA,SAASA,uBAAT,QAAwC,8BAAxC;AACA,SAASC,uBAAT,QAAwC,4BAAxC;;AAQA;AASI,2BACIC,gBADJ,EAEIC,OAFJ,EAGIC,MAHJ,EAIIC,yBAJJ,EAIyD;AARxC,4CAAmC,GAAnC;AACT,sBAAqB,CAArB;AACA,4BAAkC,EAAlC;AAOJ,SAAKF,OAAL,GAAeA,OAAf;;AAGA,QAAIE,yBAAyB,CAACC,6BAA1B,KAA4D,IAA5D,IACGL,uBAAuB,CAACM,WAAxB,EADP,EAC8C;AAC1C,WAAKC,OAAL,GAAe,IAAIP,uBAAJ,CACXC,gBADW,EACOC,OADP,EACgBC,MADhB,CAAf;AAEH,KAJD,MAIO;AACH,WAAKI,OAAL,GAAe,IAAIR,uBAAJ,CACXE,gBADW,EACOC,OADP,EACgBC,MADhB,CAAf;AAEH;AACJ;;AAEDK,oDAAYC,MAAZ,EAAqC;AAArC;;AACI,QAAIC,KAAK,GAAGC,WAAW,CAACC,GAAZ,EAAZ;AACA,WAAO,KAAKL,OAAL,CAAaM,WAAb,CAAyBJ,MAAzB,EAAiCK,OAAjC,CAAyC;AAC5C,UAAIC,KAAI,CAACb,OAAT,EAAkB;AACd,YAAIc,aAAa,GAAGL,WAAW,CAACC,GAAZ,KAAoBF,KAAxC;;AACAK,aAAI,CAACE,gBAAL,CAAsBC,IAAtB,CAA2BF,aAA3B;;AACAD,aAAI,CAACI,UAAL;;AACAJ,aAAI,CAACK,8BAAL;AACH;AACJ,KAPM,CAAP;AAQH,GAVD;;AAeAZ;AACI,QAAI,KAAKW,UAAL,GAAkB,KAAKE,gCAA3B,EAA6D;AACzD;AACH;;AAED,QAAIC,GAAG,GAAU,CAAjB;;AACA,SAA0B,sBAAKL,gBAA/B,EAA0BM,cAA1B,EAA0BA,IAA1B,EAAiD;AAA5C,UAAIP,aAAa,SAAjB;AACDM,SAAG,IAAIN,aAAP;AACH;;AACD,QAAIQ,IAAI,GAAGF,GAAG,GAAG,KAAKL,gBAAL,CAAsBQ,MAAvC;AAEAC,WAAO,CAACC,GAAR,CAAeH,IAAI,aAAJ,GAAe,KAAKP,gBAAL,CAAsBQ,MAArC,GAA2C,aAA1D;AACA,SAAKN,UAAL,GAAkB,CAAlB;AACA,SAAKF,gBAAL,GAAwB,EAAxB;AACH,GAdD;;AAeJ;AAAC,CAzDD","names":["ZXingHtml5QrcodeDecoder","BarcodeDetectorDelegate","requestedFormats","verbose","logger","experimentalFeatureConfig","useBarCodeDetectorIfSupported","isSupported","decoder","Html5QrcodeShim","canvas","start","performance","now","decodeAsync","finally","_this","executionTime","executionResults","push","executions","possiblyFlushPerformanceReport","EXECUTIONS_TO_REPORT_PERFORMANCE","sum","_i","mean","length","console","log"],"sources":["../../src/code-decoder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}