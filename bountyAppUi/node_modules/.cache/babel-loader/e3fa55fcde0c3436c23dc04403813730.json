{"ast":null,"code":"import { Html5QrcodeConstants, Html5QrcodeScanType, Html5QrcodeErrorFactory, BaseLoggger, isNullOrUndefined } from \"./core\";\nimport { Html5Qrcode } from \"./html5-qrcode\";\nimport { Html5QrcodeScannerStrings } from \"./strings\";\nimport { ASSET_FILE_SCAN, ASSET_CAMERA_SCAN } from \"./image-assets\";\nimport { PersistedDataManager } from \"./storage\";\nimport { LibraryInfoContainer } from \"./ui\";\nimport { CameraManager } from \"./camera\";\nimport { ScanTypeSelector } from \"./ui/scanner/scan-type-selector\";\nvar Html5QrcodeScannerStatus;\n\n(function (Html5QrcodeScannerStatus) {\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_DEFAULT\"] = 0] = \"STATUS_DEFAULT\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_SUCCESS\"] = 1] = \"STATUS_SUCCESS\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_WARNING\"] = 2] = \"STATUS_WARNING\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_REQUESTING_PERMISSION\"] = 3] = \"STATUS_REQUESTING_PERMISSION\";\n})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));\n\nfunction toHtml5QrcodeCameraScanConfig(config) {\n  return {\n    fps: config.fps,\n    qrbox: config.qrbox,\n    aspectRatio: config.aspectRatio,\n    disableFlip: config.disableFlip,\n    videoConstraints: config.videoConstraints\n  };\n}\n\nfunction toHtml5QrcodeFullConfig(config, verbose) {\n  return {\n    formatsToSupport: config.formatsToSupport,\n    experimentalFeatures: config.experimentalFeatures,\n    verbose: verbose\n  };\n}\n\nvar Html5QrcodeScanner = function () {\n  function Html5QrcodeScanner(elementId, config, verbose) {\n    this.lastMatchFound = null;\n    this.cameraScanImage = null;\n    this.fileScanImage = null;\n    this.elementId = elementId;\n    this.config = this.createConfig(config);\n    this.verbose = verbose === true;\n\n    if (!document.getElementById(elementId)) {\n      throw \"HTML Element with id=\" + elementId + \" not found\";\n    }\n\n    this.scanTypeSelector = new ScanTypeSelector(this.config.supportedScanTypes);\n    this.currentScanType = this.scanTypeSelector.getDefaultScanType();\n    this.sectionSwapAllowed = true;\n    this.logger = new BaseLoggger(this.verbose);\n    this.persistedDataManager = new PersistedDataManager();\n\n    if (config.rememberLastUsedCamera !== true) {\n      this.persistedDataManager.reset();\n    }\n  }\n\n  Html5QrcodeScanner.prototype.render = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n\n    this.lastMatchFound = null;\n\n    this.qrCodeSuccessCallback = function (decodedText, result) {\n      if (qrCodeSuccessCallback) {\n        qrCodeSuccessCallback(decodedText, result);\n      } else {\n        if (_this.lastMatchFound === decodedText) {\n          return;\n        }\n\n        _this.lastMatchFound = decodedText;\n\n        _this.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(decodedText), Html5QrcodeScannerStatus.STATUS_SUCCESS);\n      }\n    };\n\n    this.qrCodeErrorCallback = function (errorMessage, error) {\n      if (qrCodeErrorCallback) {\n        qrCodeErrorCallback(errorMessage, error);\n      }\n    };\n\n    var container = document.getElementById(this.elementId);\n\n    if (!container) {\n      throw \"HTML Element with id=\" + this.elementId + \" not found\";\n    }\n\n    container.innerHTML = \"\";\n    this.createBasicLayout(container);\n    this.html5Qrcode = new Html5Qrcode(this.getScanRegionId(), toHtml5QrcodeFullConfig(this.config, this.verbose));\n  };\n\n  Html5QrcodeScanner.prototype.pause = function (shouldPauseVideo) {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n\n    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n      shouldPauseVideo = false;\n    }\n\n    this.html5Qrcode.pause(shouldPauseVideo);\n  };\n\n  Html5QrcodeScanner.prototype.resume = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n\n    this.html5Qrcode.resume();\n  };\n\n  Html5QrcodeScanner.prototype.getState = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n\n    return this.html5Qrcode.getState();\n  };\n\n  Html5QrcodeScanner.prototype.clear = function () {\n    var _this = this;\n\n    var emptyHtmlContainer = function () {\n      var mainContainer = document.getElementById(_this.elementId);\n\n      if (mainContainer) {\n        mainContainer.innerHTML = \"\";\n\n        _this.resetBasicLayout(mainContainer);\n      }\n    };\n\n    if (this.html5Qrcode) {\n      return new Promise(function (resolve, reject) {\n        if (!_this.html5Qrcode) {\n          resolve();\n          return;\n        }\n\n        if (_this.html5Qrcode.isScanning) {\n          _this.html5Qrcode.stop().then(function (_) {\n            if (!_this.html5Qrcode) {\n              resolve();\n              return;\n            }\n\n            _this.html5Qrcode.clear();\n\n            emptyHtmlContainer();\n            resolve();\n          }).catch(function (error) {\n            if (_this.verbose) {\n              _this.logger.logError(\"Unable to stop qrcode scanner\", error);\n            }\n\n            reject(error);\n          });\n        } else {\n          _this.html5Qrcode.clear();\n\n          emptyHtmlContainer();\n        }\n      });\n    }\n\n    return Promise.resolve();\n  };\n\n  Html5QrcodeScanner.prototype.getRunningTrackCapabilities = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n\n    return this.html5Qrcode.getRunningTrackCapabilities();\n  };\n\n  Html5QrcodeScanner.prototype.applyVideoConstraints = function (videoConstaints) {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n\n    return this.html5Qrcode.applyVideoConstraints(videoConstaints);\n  };\n\n  Html5QrcodeScanner.prototype.createConfig = function (config) {\n    if (config) {\n      if (!config.fps) {\n        config.fps = Html5QrcodeConstants.SCAN_DEFAULT_FPS;\n      }\n\n      if (config.rememberLastUsedCamera !== !Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED) {\n        config.rememberLastUsedCamera = Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED;\n      }\n\n      return config;\n    }\n\n    return {\n      fps: Html5QrcodeConstants.SCAN_DEFAULT_FPS,\n      rememberLastUsedCamera: Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,\n      supportedScanTypes: Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE\n    };\n  };\n\n  Html5QrcodeScanner.prototype.createBasicLayout = function (parent) {\n    parent.style.position = \"relative\";\n    parent.style.padding = \"0px\";\n    parent.style.border = \"1px solid silver\";\n    this.createHeader(parent);\n    var qrCodeScanRegion = document.createElement(\"div\");\n    var scanRegionId = this.getScanRegionId();\n    qrCodeScanRegion.id = scanRegionId;\n    qrCodeScanRegion.style.width = \"100%\";\n    qrCodeScanRegion.style.minHeight = \"100px\";\n    qrCodeScanRegion.style.textAlign = \"center\";\n    parent.appendChild(qrCodeScanRegion);\n\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType)) {\n      this.insertCameraScanImageToScanRegion();\n    } else {\n      this.insertFileScanImageToScanRegion();\n    }\n\n    var qrCodeDashboard = document.createElement(\"div\");\n    var dashboardId = this.getDashboardId();\n    qrCodeDashboard.id = dashboardId;\n    qrCodeDashboard.style.width = \"100%\";\n    parent.appendChild(qrCodeDashboard);\n    this.setupInitialDashboard(qrCodeDashboard);\n  };\n\n  Html5QrcodeScanner.prototype.resetBasicLayout = function (mainContainer) {\n    mainContainer.style.border = \"none\";\n  };\n\n  Html5QrcodeScanner.prototype.setupInitialDashboard = function (dashboard) {\n    var $this = this;\n    this.createSection(dashboard);\n    this.createSectionControlPanel();\n\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      this.createSectionSwap();\n    }\n  };\n\n  Html5QrcodeScanner.prototype.createHeader = function (dashboard) {\n    var header = document.createElement(\"div\");\n    header.style.textAlign = \"left\";\n    header.style.margin = \"0px\";\n    dashboard.appendChild(header);\n    var libraryInfo = new LibraryInfoContainer();\n    libraryInfo.renderInto(header);\n    var headerMessageContainer = document.createElement(\"div\");\n    headerMessageContainer.id = this.getHeaderMessageContainerId();\n    headerMessageContainer.style.display = \"none\";\n    headerMessageContainer.style.textAlign = \"center\";\n    headerMessageContainer.style.fontSize = \"14px\";\n    headerMessageContainer.style.padding = \"2px 10px\";\n    headerMessageContainer.style.margin = \"4px\";\n    headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\n    header.appendChild(headerMessageContainer);\n  };\n\n  Html5QrcodeScanner.prototype.createSection = function (dashboard) {\n    var section = document.createElement(\"div\");\n    section.id = this.getDashboardSectionId();\n    section.style.width = \"100%\";\n    section.style.padding = \"10px 0px 10px 0px\";\n    section.style.textAlign = \"left\";\n    dashboard.appendChild(section);\n  };\n\n  Html5QrcodeScanner.prototype.createCameraListUi = function (scpCameraScanRegion, requestPermissionContainer, requestPermissionButton) {\n    var $this = this;\n    $this.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());\n\n    var createPermissionButtonIfNotExists = function () {\n      if (!requestPermissionButton) {\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      }\n    };\n\n    Html5Qrcode.getCameras().then(function (cameras) {\n      $this.persistedDataManager.setHasPermission(true);\n      $this.resetHeaderMessage();\n\n      if (cameras && cameras.length > 0) {\n        scpCameraScanRegion.removeChild(requestPermissionContainer);\n        $this.renderCameraSelection(cameras);\n      } else {\n        $this.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(), Html5QrcodeScannerStatus.STATUS_WARNING);\n        createPermissionButtonIfNotExists();\n      }\n    }).catch(function (error) {\n      $this.persistedDataManager.setHasPermission(false);\n\n      if (requestPermissionButton) {\n        requestPermissionButton.disabled = false;\n      } else {\n        createPermissionButtonIfNotExists();\n      }\n\n      $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n    });\n  };\n\n  Html5QrcodeScanner.prototype.createPermissionButton = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    var requestPermissionButton = document.createElement(\"button\");\n    requestPermissionButton.id = this.getCameraPermissionButtonId();\n    requestPermissionButton.innerText = Html5QrcodeScannerStrings.cameraPermissionTitle();\n    requestPermissionButton.addEventListener(\"click\", function () {\n      requestPermissionButton.disabled = true;\n      $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer, requestPermissionButton);\n    });\n    requestPermissionContainer.appendChild(requestPermissionButton);\n  };\n\n  Html5QrcodeScanner.prototype.createPermissionsUi = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType) && this.persistedDataManager.hasCameraPermissions()) {\n      CameraManager.hasCameraPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer);\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n          $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      });\n      return;\n    }\n\n    this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n  };\n\n  Html5QrcodeScanner.prototype.createSectionControlPanel = function () {\n    var $this = this;\n    var section = document.getElementById(this.getDashboardSectionId());\n    var sectionControlPanel = document.createElement(\"div\");\n    section.appendChild(sectionControlPanel);\n    var scpCameraScanRegion = document.createElement(\"div\");\n    scpCameraScanRegion.id = this.getDashboardSectionCameraScanRegionId();\n    scpCameraScanRegion.style.display = ScanTypeSelector.isCameraScanType(this.currentScanType) ? \"block\" : \"none\";\n    sectionControlPanel.appendChild(scpCameraScanRegion);\n    var requestPermissionContainer = document.createElement(\"div\");\n    requestPermissionContainer.style.textAlign = \"center\";\n    scpCameraScanRegion.appendChild(requestPermissionContainer);\n\n    if (this.scanTypeSelector.isCameraScanRequired()) {\n      this.createPermissionsUi(scpCameraScanRegion, requestPermissionContainer);\n    }\n\n    this.renderFileScanUi(sectionControlPanel);\n  };\n\n  Html5QrcodeScanner.prototype.renderFileScanUi = function (parent) {\n    var $this = this;\n    var fileBasedScanRegion = document.createElement(\"div\");\n    fileBasedScanRegion.id = this.getDashboardSectionFileScanRegionId();\n    fileBasedScanRegion.style.textAlign = \"center\";\n    fileBasedScanRegion.style.display = ScanTypeSelector.isCameraScanType(this.currentScanType) ? \"none\" : \"block\";\n    parent.appendChild(fileBasedScanRegion);\n    var fileScanInput = document.createElement(\"input\");\n    fileScanInput.id = this.getFileScanInputId();\n    fileScanInput.accept = \"image/*\";\n    fileScanInput.type = \"file\";\n    fileScanInput.style.width = \"200px\";\n    fileScanInput.disabled = ScanTypeSelector.isCameraScanType(this.currentScanType);\n    var fileScanLabel = document.createElement(\"span\");\n    fileScanLabel.innerText = \" Select Image\";\n    fileBasedScanRegion.appendChild(fileScanInput);\n    fileBasedScanRegion.appendChild(fileScanLabel);\n    fileScanInput.addEventListener(\"change\", function (e) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n\n      if (e == null || e.target == null) {\n        return;\n      }\n\n      if (!ScanTypeSelector.isFileScanType($this.currentScanType)) {\n        return;\n      }\n\n      if (e.target.files.length === 0) {\n        return;\n      }\n\n      var file = e.target.files[0];\n      $this.html5Qrcode.scanFileV2(file, true).then(function (html5qrcodeResult) {\n        $this.resetHeaderMessage();\n        $this.qrCodeSuccessCallback(html5qrcodeResult.decodedText, html5qrcodeResult);\n      }).catch(function (error) {\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n        $this.qrCodeErrorCallback(error, Html5QrcodeErrorFactory.createFrom(error));\n      });\n    });\n  };\n\n  Html5QrcodeScanner.prototype.renderCameraSelection = function (cameras) {\n    var _this = this;\n\n    var $this = this;\n    var scpCameraScanRegion = document.getElementById(this.getDashboardSectionCameraScanRegionId());\n    scpCameraScanRegion.style.textAlign = \"center\";\n    var cameraSelectionContainer = document.createElement(\"span\");\n    cameraSelectionContainer.style.marginRight = \"10px\";\n    var numCameras = cameras.length;\n    var cameraSelectionSelect = document.createElement(\"select\");\n\n    if (numCameras === 1) {\n      cameraSelectionSelect.style.display = \"none\";\n    } else {\n      var selectCameraString = Html5QrcodeScannerStrings.selectCamera();\n      cameraSelectionContainer.innerText = selectCameraString + \" (\" + cameras.length + \")  \";\n    }\n\n    cameraSelectionSelect.id = this.getCameraSelectionId();\n    var options = [];\n\n    for (var _i = 0, cameras_1 = cameras; _i < cameras_1.length; _i++) {\n      var camera = cameras_1[_i];\n      var value = camera.id;\n      var name_1 = camera.label == null ? value : camera.label;\n      var option = document.createElement(\"option\");\n      option.value = value;\n      option.innerText = name_1;\n      options.push(option);\n      cameraSelectionSelect.appendChild(option);\n    }\n\n    cameraSelectionContainer.appendChild(cameraSelectionSelect);\n    scpCameraScanRegion.appendChild(cameraSelectionContainer);\n    var cameraActionContainer = document.createElement(\"span\");\n    var cameraActionStartButton = document.createElement(\"button\");\n    cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n    cameraActionContainer.appendChild(cameraActionStartButton);\n    var cameraActionStopButton = document.createElement(\"button\");\n    cameraActionStopButton.innerText = Html5QrcodeScannerStrings.scanButtonStopScanningText();\n    cameraActionStopButton.style.display = \"none\";\n    cameraActionStopButton.disabled = true;\n    cameraActionContainer.appendChild(cameraActionStopButton);\n    scpCameraScanRegion.appendChild(cameraActionContainer);\n\n    var resetCameraActionStartButton = function (shouldShow) {\n      if (!shouldShow) {\n        cameraActionStartButton.style.display = \"none\";\n      }\n\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n      cameraActionStartButton.style.opacity = \"1\";\n      cameraActionStartButton.disabled = false;\n\n      if (shouldShow) {\n        cameraActionStartButton.style.display = \"inline-block\";\n      }\n    };\n\n    cameraActionStartButton.addEventListener(\"click\", function (_) {\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonScanningStarting();\n      cameraSelectionSelect.disabled = true;\n      cameraActionStartButton.disabled = true;\n      cameraActionStartButton.style.opacity = \"0.5\";\n\n      if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n        $this.showHideScanTypeSwapLink(false);\n      }\n\n      $this.resetHeaderMessage();\n      var cameraId = cameraSelectionSelect.value;\n      $this.persistedDataManager.setLastUsedCameraId(cameraId);\n      $this.html5Qrcode.start(cameraId, toHtml5QrcodeCameraScanConfig($this.config), $this.qrCodeSuccessCallback, $this.qrCodeErrorCallback).then(function (_) {\n        cameraActionStopButton.disabled = false;\n        cameraActionStopButton.style.display = \"inline-block\";\n        resetCameraActionStartButton(false);\n      }).catch(function (error) {\n        $this.showHideScanTypeSwapLink(true);\n        cameraSelectionSelect.disabled = false;\n        resetCameraActionStartButton(true);\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n\n    if (numCameras === 1) {\n      cameraActionStartButton.click();\n    }\n\n    cameraActionStopButton.addEventListener(\"click\", function (_) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n\n      cameraActionStopButton.disabled = true;\n      $this.html5Qrcode.stop().then(function (_) {\n        if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n          $this.showHideScanTypeSwapLink(true);\n        }\n\n        cameraSelectionSelect.disabled = false;\n        cameraActionStartButton.disabled = false;\n        cameraActionStopButton.style.display = \"none\";\n        cameraActionStartButton.style.display = \"inline-block\";\n        $this.insertCameraScanImageToScanRegion();\n      }).catch(function (error) {\n        cameraActionStopButton.disabled = false;\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n\n    if ($this.persistedDataManager.getLastUsedCameraId()) {\n      var cameraId = $this.persistedDataManager.getLastUsedCameraId();\n      var cameraFound = false;\n\n      for (var _a = 0, options_1 = options; _a < options_1.length; _a++) {\n        var option = options_1[_a];\n\n        if (option.value === cameraId) {\n          cameraFound = true;\n          break;\n        }\n      }\n\n      if (cameraFound) {\n        cameraSelectionSelect.value = cameraId;\n        cameraActionStartButton.click();\n      } else {\n        $this.persistedDataManager.resetLastUsedCameraId();\n      }\n    }\n  };\n\n  Html5QrcodeScanner.prototype.createSectionSwap = function () {\n    var $this = this;\n    var TEXT_IF_CAMERA_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfCameraScanSelected();\n    var TEXT_IF_FILE_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfFileScanSelected();\n    var section = document.getElementById(this.getDashboardSectionId());\n    var switchContainer = document.createElement(\"div\");\n    switchContainer.style.textAlign = \"center\";\n    var switchScanTypeLink = document.createElement(\"a\");\n    switchScanTypeLink.style.textDecoration = \"underline\";\n    switchScanTypeLink.id = this.getDashboardSectionSwapLinkId();\n    switchScanTypeLink.innerText = ScanTypeSelector.isCameraScanType(this.currentScanType) ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\n    switchScanTypeLink.addEventListener(\"click\", function () {\n      if (!$this.sectionSwapAllowed) {\n        if ($this.verbose) {\n          $this.logger.logError(\"Section swap called when not allowed\");\n        }\n\n        return;\n      }\n\n      $this.resetHeaderMessage();\n      $this.getFileScanInput().value = \"\";\n      $this.sectionSwapAllowed = false;\n\n      if (ScanTypeSelector.isCameraScanType($this.currentScanType)) {\n        $this.clearScanRegion();\n        $this.getFileScanInput().disabled = false;\n        $this.getCameraScanRegion().style.display = \"none\";\n        $this.getFileScanRegion().style.display = \"block\";\n        switchScanTypeLink.innerText = TEXT_IF_FILE_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_FILE;\n        $this.insertFileScanImageToScanRegion();\n      } else {\n        $this.clearScanRegion();\n        $this.getFileScanInput().disabled = true;\n        $this.getCameraScanRegion().style.display = \"block\";\n        $this.getFileScanRegion().style.display = \"none\";\n        switchScanTypeLink.innerText = TEXT_IF_CAMERA_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_CAMERA;\n        $this.insertCameraScanImageToScanRegion();\n        $this.startCameraScanIfPermissionExistsOnSwap();\n      }\n\n      $this.sectionSwapAllowed = true;\n    });\n    switchContainer.appendChild(switchScanTypeLink);\n    section.appendChild(switchContainer);\n  };\n\n  Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap = function () {\n    var _this = this;\n\n    var $this = this;\n\n    if (this.persistedDataManager.hasCameraPermissions()) {\n      CameraManager.hasCameraPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          var permissionButton = document.getElementById($this.getCameraPermissionButtonId());\n\n          if (!permissionButton) {\n            _this.logger.logError(\"Permission button not found, fail;\");\n\n            throw \"Permission button not found\";\n          }\n\n          permissionButton.click();\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n      });\n      return;\n    }\n  };\n\n  Html5QrcodeScanner.prototype.resetHeaderMessage = function () {\n    var messageDiv = document.getElementById(this.getHeaderMessageContainerId());\n    messageDiv.style.display = \"none\";\n  };\n\n  Html5QrcodeScanner.prototype.setHeaderMessage = function (messageText, scannerStatus) {\n    if (!scannerStatus) {\n      scannerStatus = Html5QrcodeScannerStatus.STATUS_DEFAULT;\n    }\n\n    var messageDiv = this.getHeaderMessageDiv();\n    messageDiv.innerText = messageText;\n    messageDiv.style.display = \"block\";\n\n    switch (scannerStatus) {\n      case Html5QrcodeScannerStatus.STATUS_SUCCESS:\n        messageDiv.style.background = \"#6aaf5042\";\n        messageDiv.style.color = \"#477735\";\n        break;\n\n      case Html5QrcodeScannerStatus.STATUS_WARNING:\n        messageDiv.style.background = \"#cb243124\";\n        messageDiv.style.color = \"#cb2431\";\n        break;\n\n      case Html5QrcodeScannerStatus.STATUS_DEFAULT:\n      default:\n        messageDiv.style.background = \"#00000000\";\n        messageDiv.style.color = \"rgb(17, 17, 17)\";\n        break;\n    }\n  };\n\n  Html5QrcodeScanner.prototype.showHideScanTypeSwapLink = function (shouldDisplay) {\n    if (shouldDisplay !== true) {\n      shouldDisplay = false;\n    }\n\n    this.sectionSwapAllowed = shouldDisplay;\n    this.getDashboardSectionSwapLink().style.display = shouldDisplay ? \"inline-block\" : \"none\";\n  };\n\n  Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n\n    if (this.cameraScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.cameraScanImage);\n      return;\n    }\n\n    this.cameraScanImage = new Image();\n\n    this.cameraScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.cameraScanImage);\n    };\n\n    this.cameraScanImage.width = 64;\n    this.cameraScanImage.style.opacity = \"0.8\";\n    this.cameraScanImage.src = ASSET_CAMERA_SCAN;\n  };\n\n  Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n\n    if (this.fileScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.fileScanImage);\n      return;\n    }\n\n    this.fileScanImage = new Image();\n\n    this.fileScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.fileScanImage);\n    };\n\n    this.fileScanImage.width = 64;\n    this.fileScanImage.style.opacity = \"0.8\";\n    this.fileScanImage.src = ASSET_FILE_SCAN;\n  };\n\n  Html5QrcodeScanner.prototype.clearScanRegion = function () {\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    qrCodeScanRegion.innerHTML = \"\";\n  };\n\n  Html5QrcodeScanner.prototype.getDashboardSectionId = function () {\n    return this.elementId + \"__dashboard_section\";\n  };\n\n  Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId = function () {\n    return this.elementId + \"__dashboard_section_csr\";\n  };\n\n  Html5QrcodeScanner.prototype.getDashboardSectionFileScanRegionId = function () {\n    return this.elementId + \"__dashboard_section_fsr\";\n  };\n\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId = function () {\n    return this.elementId + \"__dashboard_section_swaplink\";\n  };\n\n  Html5QrcodeScanner.prototype.getScanRegionId = function () {\n    return this.elementId + \"__scan_region\";\n  };\n\n  Html5QrcodeScanner.prototype.getDashboardId = function () {\n    return this.elementId + \"__dashboard\";\n  };\n\n  Html5QrcodeScanner.prototype.getFileScanInputId = function () {\n    return this.elementId + \"__filescan_input\";\n  };\n\n  Html5QrcodeScanner.prototype.getStatusSpanId = function () {\n    return this.elementId + \"__status_span\";\n  };\n\n  Html5QrcodeScanner.prototype.getHeaderMessageContainerId = function () {\n    return this.elementId + \"__header_message\";\n  };\n\n  Html5QrcodeScanner.prototype.getCameraSelectionId = function () {\n    return this.elementId + \"__camera_selection\";\n  };\n\n  Html5QrcodeScanner.prototype.getCameraPermissionButtonId = function () {\n    return this.elementId + \"__camera_permission_button\";\n  };\n\n  Html5QrcodeScanner.prototype.getCameraScanRegion = function () {\n    return document.getElementById(this.getDashboardSectionCameraScanRegionId());\n  };\n\n  Html5QrcodeScanner.prototype.getFileScanRegion = function () {\n    return document.getElementById(this.getDashboardSectionFileScanRegionId());\n  };\n\n  Html5QrcodeScanner.prototype.getFileScanInput = function () {\n    return document.getElementById(this.getFileScanInputId());\n  };\n\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLink = function () {\n    return document.getElementById(this.getDashboardSectionSwapLinkId());\n  };\n\n  Html5QrcodeScanner.prototype.getHeaderMessageDiv = function () {\n    return document.getElementById(this.getHeaderMessageContainerId());\n  };\n\n  return Html5QrcodeScanner;\n}();\n\nexport { Html5QrcodeScanner };","map":{"version":3,"mappings":"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","names":["Html5QrcodeConstants","Html5QrcodeScanType","Html5QrcodeErrorFactory","BaseLoggger","isNullOrUndefined","Html5Qrcode","Html5QrcodeScannerStrings","ASSET_FILE_SCAN","ASSET_CAMERA_SCAN","PersistedDataManager","LibraryInfoContainer","CameraManager","ScanTypeSelector","Html5QrcodeScannerStatus","toHtml5QrcodeCameraScanConfig","config","fps","qrbox","aspectRatio","disableFlip","videoConstraints","toHtml5QrcodeFullConfig","verbose","formatsToSupport","experimentalFeatures","elementId","createConfig","document","getElementById","scanTypeSelector","supportedScanTypes","currentScanType","getDefaultScanType","sectionSwapAllowed","logger","persistedDataManager","rememberLastUsedCamera","reset","Html5QrcodeScanner","qrCodeSuccessCallback","qrCodeErrorCallback","lastMatchFound","decodedText","result","_this","setHeaderMessage","lastMatch","STATUS_SUCCESS","errorMessage","error","container","innerHTML","createBasicLayout","html5Qrcode","getScanRegionId","shouldPauseVideo","pause","resume","getState","emptyHtmlContainer","mainContainer","resetBasicLayout","Promise","resolve","reject","isScanning","stop","then","_","clear","catch","logError","getRunningTrackCapabilities","videoConstaints","applyVideoConstraints","SCAN_DEFAULT_FPS","DEFAULT_REMEMBER_LAST_CAMERA_USED","DEFAULT_SUPPORTED_SCAN_TYPE","parent","style","position","padding","border","createHeader","qrCodeScanRegion","createElement","scanRegionId","id","width","minHeight","textAlign","appendChild","isCameraScanType","insertCameraScanImageToScanRegion","insertFileScanImageToScanRegion","qrCodeDashboard","dashboardId","getDashboardId","setupInitialDashboard","dashboard","$this","createSection","createSectionControlPanel","hasMoreThanOneScanType","createSectionSwap","header","margin","libraryInfo","renderInto","headerMessageContainer","getHeaderMessageContainerId","display","fontSize","borderTop","section","getDashboardSectionId","scpCameraScanRegion","requestPermissionContainer","requestPermissionButton","cameraPermissionRequesting","createPermissionButtonIfNotExists","createPermissionButton","getCameras","cameras","setHasPermission","resetHeaderMessage","length","removeChild","renderCameraSelection","noCameraFound","STATUS_WARNING","disabled","getCameraPermissionButtonId","innerText","cameraPermissionTitle","addEventListener","createCameraListUi","hasCameraPermissions","hasPermissions","sectionControlPanel","getDashboardSectionCameraScanRegionId","isCameraScanRequired","createPermissionsUi","renderFileScanUi","fileBasedScanRegion","getDashboardSectionFileScanRegionId","fileScanInput","getFileScanInputId","accept","type","fileScanLabel","e","target","isFileScanType","files","file","scanFileV2","html5qrcodeResult","createFrom","cameraSelectionContainer","marginRight","numCameras","cameraSelectionSelect","selectCameraString","selectCamera","getCameraSelectionId","options","_i","camera","value","name_1","label","option","push","cameraActionContainer","cameraActionStartButton","scanButtonStartScanningText","cameraActionStopButton","scanButtonStopScanningText","resetCameraActionStartButton","shouldShow","opacity","scanButtonScanningStarting","showHideScanTypeSwapLink","cameraId","setLastUsedCameraId","start","click","getLastUsedCameraId","cameraFound","_a","resetLastUsedCameraId","TEXT_IF_CAMERA_SCAN_SELECTED","textIfCameraScanSelected","TEXT_IF_FILE_SCAN_SELECTED","textIfFileScanSelected","switchContainer","switchScanTypeLink","textDecoration","getDashboardSectionSwapLinkId","getFileScanInput","clearScanRegion","getCameraScanRegion","getFileScanRegion","SCAN_TYPE_FILE","SCAN_TYPE_CAMERA","startCameraScanIfPermissionExistsOnSwap","permissionButton","messageDiv","messageText","scannerStatus","STATUS_DEFAULT","getHeaderMessageDiv","background","color","shouldDisplay","getDashboardSectionSwapLink","cameraScanImage","Image","onload","src","fileScanImage"],"sources":["../../src/html5-qrcode-scanner.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}