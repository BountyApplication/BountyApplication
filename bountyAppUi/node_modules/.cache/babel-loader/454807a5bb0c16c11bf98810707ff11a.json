{"ast":null,"code":"var PersistedDataFactory = function () {\n  function PersistedDataFactory() {}\n\n  PersistedDataFactory.createDefault = function () {\n    return {\n      hasPermission: false,\n      lastUsedCameraId: null\n    };\n  };\n\n  return PersistedDataFactory;\n}();\n\nvar PersistedDataManager = function () {\n  function PersistedDataManager() {\n    this.data = PersistedDataFactory.createDefault();\n    var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n\n    if (!data) {\n      this.reset();\n    } else {\n      this.data = JSON.parse(data);\n    }\n  }\n\n  PersistedDataManager.prototype.hasCameraPermissions = function () {\n    return this.data.hasPermission;\n  };\n\n  PersistedDataManager.prototype.getLastUsedCameraId = function () {\n    return this.data.lastUsedCameraId;\n  };\n\n  PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n    this.data.hasPermission = hasPermission;\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n    this.data.lastUsedCameraId = lastUsedCameraId;\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n    this.data.lastUsedCameraId = null;\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.reset = function () {\n    this.data = PersistedDataFactory.createDefault();\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.flush = function () {\n    localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n  };\n\n  PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n  return PersistedDataManager;\n}();\n\nexport { PersistedDataManager };","map":{"version":3,"mappings":"AAeA;AAAA,mCAOC;;AANUA,uCAAP;AACI,WAAO;AACHC,mBAAa,EAAE,KADZ;AAEHC,sBAAgB,EAAE;AAFf,KAAP;AAIH,GALM;;AAMX;AAAC,CAPD;;AASA;AAKI;AAHQ,gBAAsBF,oBAAoB,CAACG,aAArB,EAAtB;AAIJ,QAAIC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqBC,oBAAoB,CAACC,iBAA1C,CAAX;;AACA,QAAI,CAACJ,IAAL,EAAW;AACP,WAAKK,KAAL;AACH,KAFD,MAEO;AACH,WAAKL,IAAL,GAAYM,IAAI,CAACC,KAAL,CAAWP,IAAX,CAAZ;AACH;AACJ;;AAEMG,wDAAP;AACI,WAAO,KAAKH,IAAL,CAAUH,aAAjB;AACH,GAFM;;AAIAM,uDAAP;AACI,WAAO,KAAKH,IAAL,CAAUF,gBAAjB;AACH,GAFM;;AAIAK,oDAAP,UAAwBN,aAAxB,EAA8C;AAC1C,SAAKG,IAAL,CAAUH,aAAV,GAA0BA,aAA1B;AACA,SAAKW,KAAL;AACH,GAHM;;AAKAL,uDAAP,UAA2BL,gBAA3B,EAAmD;AAC/C,SAAKE,IAAL,CAAUF,gBAAV,GAA6BA,gBAA7B;AACA,SAAKU,KAAL;AACH,GAHM;;AAKAL,yDAAP;AACI,SAAKH,IAAL,CAAUF,gBAAV,GAA6B,IAA7B;AACA,SAAKU,KAAL;AACH,GAHM;;AAKAL,yCAAP;AACI,SAAKH,IAAL,GAAYJ,oBAAoB,CAACG,aAArB,EAAZ;AACA,SAAKS,KAAL;AACH,GAHM;;AAKCL,yCAAR;AACIF,gBAAY,CAACQ,OAAb,CACIN,oBAAoB,CAACC,iBADzB,EAEIE,IAAI,CAACI,SAAL,CAAe,KAAKV,IAApB,CAFJ;AAGH,GAJO;;AAvCOG,2CAA4B,mBAA5B;AA4CnB;AA/CA;;SAAaA","names":["PersistedDataFactory","hasPermission","lastUsedCameraId","createDefault","data","localStorage","getItem","PersistedDataManager","LOCAL_STORAGE_KEY","reset","JSON","parse","flush","setItem","stringify"],"sources":["../../src/storage.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}