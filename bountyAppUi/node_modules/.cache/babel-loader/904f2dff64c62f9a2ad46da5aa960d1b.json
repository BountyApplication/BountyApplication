{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Isaja\\\\my-app\\\\bountyAppUi\\\\src\\\\bounty\\\\generalUi\\\\GeneralUi.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport ProductDisplay from './ProductDisplay';\nimport UserSelect from '../util/UserSelect';\nimport BalanceInfos from './BalanceInfos';\nimport BalanceCorrection from './BalanceCorrection';\nimport CashPayment from './ChashPayment';\nimport LastBookings from './LastBookings';\nimport { getProducts, getUserBalance } from '../util/Database';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GeneralUi(props) {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [userBalance, setUserBalance] = useState(null);\n  const [correctionPlus, setCorrectionPlus] = useState(null);\n  const [correctionMinus, setCorrectionMinus] = useState(null);\n  const [paymentIn, setPaymentIn] = useState(null);\n  const [paymentOut, setPaymentOut] = useState(null);\n  const [products, setProducts] = useState(getProducts());\n  const [resetUserCallback, setResetUserCallback] = useState();\n  useEffect(() => {\n    if (user === null || user === undefined) return;\n    setUserBalance(getUserBalance(user));\n    console.log(balance);\n  }, [user]);\n\n  function getUserBalance(user) {\n    // do server\n    let balance = getUserBalance(user.id);\n    console.log(balance);\n    setUserBalance(balance);\n  }\n\n  function calculateTotal() {\n    const productSum = products.reduce((sum, _ref) => {\n      let {\n        price,\n        amount\n      } = _ref;\n      return sum + price * amount;\n    }, 0);\n    return productSum - correctionPlus + correctionMinus - paymentIn + paymentOut;\n  }\n\n  function resetUser() {\n    setUser(null);\n    setUserBalance(null);\n  }\n\n  function resetProducts() {\n    setProducts(products.map(product => ({ ...product,\n      amount: 0\n    })));\n    setCorrectionPlus(null);\n    setCorrectionMinus(null);\n    setPaymentIn(null);\n    setPaymentOut(null);\n  }\n\n  function submit() {\n    console.log(calculateTotal()); // do server\n\n    if (resetUserCallback != null) resetUserCallback();\n    resetProducts();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(UserSelect, {\n      setResetCallback: setResetUserCallback,\n      resetCallback: resetUser,\n      runCallback: setUser,\n      useReset: true,\n      hideReset: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProductDisplay, {\n      tryRemove: calculateTotal() > userBalance,\n      products: products,\n      setProducts: setProducts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(BalanceCorrection, {\n      plus: correctionPlus,\n      setPlus: setCorrectionPlus,\n      minus: correctionMinus,\n      setMinus: setCorrectionMinus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CashPayment, {\n      out: paymentOut,\n      setOut: setPaymentOut,\n      in: paymentIn,\n      setIn: setPaymentIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {\n      className: \"wrapper\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 104\n    }, this), user !== null && /*#__PURE__*/_jsxDEV(BalanceInfos, {\n      balance: userBalance,\n      sum: calculateTotal()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 27\n    }, this), user !== null && /*#__PURE__*/_jsxDEV(LastBookings, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 27\n    }, this), (calculateTotal() !== 0 || correctionPlus !== null || paymentIn !== null) && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"wrapper\",\n      onClick: resetProducts,\n      children: \"reset\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 79\n    }, this), calculateTotal() <= userBalance && (calculateTotal() !== 0 || correctionPlus !== null || paymentIn != null) && user != null && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"wrapper\",\n      onClick: submit,\n      children: \"Buchen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 121\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\n_s(GeneralUi, \"hjomcNeIA4pq+h8qzdcSkafjEpQ=\");\n\n_c = GeneralUi;\n\nvar _c;\n\n$RefreshReg$(_c, \"GeneralUi\");","map":{"version":3,"sources":["C:/Users/Isaja/my-app/bountyAppUi/src/bounty/generalUi/GeneralUi.js"],"names":["React","useState","useEffect","Link","ProductDisplay","UserSelect","BalanceInfos","BalanceCorrection","CashPayment","LastBookings","getProducts","getUserBalance","GeneralUi","props","user","setUser","userBalance","setUserBalance","correctionPlus","setCorrectionPlus","correctionMinus","setCorrectionMinus","paymentIn","setPaymentIn","paymentOut","setPaymentOut","products","setProducts","resetUserCallback","setResetUserCallback","undefined","console","log","balance","id","calculateTotal","productSum","reduce","sum","price","amount","resetUser","resetProducts","map","product","submit"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ProductDisplay from './ProductDisplay';\r\nimport UserSelect from '../util/UserSelect';\r\nimport BalanceInfos from './BalanceInfos';\r\nimport BalanceCorrection from './BalanceCorrection';\r\nimport CashPayment from './ChashPayment';\r\nimport LastBookings from './LastBookings';\r\nimport { getProducts, getUserBalance } from '../util/Database';\r\n\r\nexport default function GeneralUi(props) {\r\n    const [user, setUser] = useState(null);\r\n    const [userBalance, setUserBalance] = useState(null);\r\n\r\n    const [correctionPlus, setCorrectionPlus] = useState(null);\r\n    const [correctionMinus, setCorrectionMinus] = useState(null);\r\n    const [paymentIn, setPaymentIn] = useState(null);\r\n    const [paymentOut, setPaymentOut] = useState(null);\r\n\r\n    const [products, setProducts] = useState(getProducts());\r\n    \r\n    const [resetUserCallback, setResetUserCallback] = useState();\r\n    \r\n    useEffect(() => {\r\n        if(user===null || user===undefined) return;\r\n        \r\n        setUserBalance(getUserBalance(user))\r\n        console.log(balance)\r\n\r\n    }, [user]);\r\n\r\n    function getUserBalance(user) {\r\n        \r\n        // do server\r\n        let balance = getUserBalance(user.id);\r\n\r\n        console.log(balance);\r\n        setUserBalance(balance);\r\n    }\r\n\r\n    function calculateTotal() {\r\n        const productSum = products.reduce((sum, {price, amount}) => sum+price*amount, 0);\r\n        return productSum - correctionPlus + correctionMinus - paymentIn + paymentOut;\r\n    }\r\n\r\n    function resetUser() {\r\n        setUser(null);\r\n        setUserBalance(null);\r\n    }\r\n\r\n    function resetProducts() { \r\n        setProducts(products.map(product => ({...product, amount: 0})));\r\n        setCorrectionPlus(null);\r\n        setCorrectionMinus(null);\r\n        setPaymentIn(null);\r\n        setPaymentOut(null);\r\n    }\r\n\r\n    function submit() {\r\n        console.log(calculateTotal());\r\n        // do server\r\n        \r\n        if(resetUserCallback!=null)\r\n            resetUserCallback();\r\n\r\n        resetProducts();\r\n    }\r\n\r\n    return(\r\n        <div className=\"main\">\r\n            {/* <Link to=\"/admin\">{\"Admin\"}</Link> */}\r\n            <UserSelect setResetCallback={setResetUserCallback} resetCallback={resetUser} runCallback={setUser} useReset={true} hideReset={true} />\r\n            <ProductDisplay tryRemove={calculateTotal()>userBalance} products={products} setProducts={setProducts} />\r\n            <BalanceCorrection plus={correctionPlus} setPlus={setCorrectionPlus} minus={correctionMinus} setMinus={setCorrectionMinus} />\r\n            <CashPayment out={paymentOut} setOut={setPaymentOut} in={paymentIn} setIn={setPaymentIn} /><br className='wrapper'/>\r\n            {user!==null&&<BalanceInfos balance={userBalance} sum={calculateTotal()} />}\r\n            {user!==null&&<LastBookings />}\r\n            {(calculateTotal()!==0||correctionPlus!==null||paymentIn!==null)&&<button className='wrapper' onClick={resetProducts}>{\"reset\"}</button>}\r\n            {calculateTotal()<=userBalance&&(calculateTotal()!==0||correctionPlus!==null||paymentIn!=null)&&user!=null&&<button className=\"wrapper\" onClick={submit}>{\"Buchen\"}</button>}\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}