{"ast":null,"code":"export var Html5QrcodeScannerState;\n\n(function (Html5QrcodeScannerState) {\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"NOT_STARTED\"] = 1] = \"NOT_STARTED\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"SCANNING\"] = 2] = \"SCANNING\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"PAUSED\"] = 3] = \"PAUSED\";\n})(Html5QrcodeScannerState || (Html5QrcodeScannerState = {}));\n\nvar StateManagerImpl = function () {\n  function StateManagerImpl() {\n    this.state = Html5QrcodeScannerState.NOT_STARTED;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  }\n\n  StateManagerImpl.prototype.directTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.state = newState;\n  };\n\n  StateManagerImpl.prototype.startTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.onGoingTransactionNewState = newState;\n    return this;\n  };\n\n  StateManagerImpl.prototype.execute = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot execute().\";\n    }\n\n    var tempNewState = this.onGoingTransactionNewState;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n    this.directTransition(tempNewState);\n  };\n\n  StateManagerImpl.prototype.cancel = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot cancel().\";\n    }\n\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  };\n\n  StateManagerImpl.prototype.getState = function () {\n    return this.state;\n  };\n\n  StateManagerImpl.prototype.failIfTransitionOngoing = function () {\n    if (this.onGoingTransactionNewState !== Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Cannnot transition to a new state, already under transition\";\n    }\n  };\n\n  StateManagerImpl.prototype.validateTransition = function (newState) {\n    switch (this.state) {\n      case Html5QrcodeScannerState.UNKNOWN:\n        throw \"Transition from unknown is not allowed\";\n\n      case Html5QrcodeScannerState.NOT_STARTED:\n        this.failIfNewStateIs(newState, [Html5QrcodeScannerState.PAUSED]);\n        break;\n\n      case Html5QrcodeScannerState.SCANNING:\n        break;\n\n      case Html5QrcodeScannerState.PAUSED:\n        break;\n    }\n  };\n\n  StateManagerImpl.prototype.failIfNewStateIs = function (newState, disallowedStatesToTransition) {\n    for (var _i = 0, disallowedStatesToTransition_1 = disallowedStatesToTransition; _i < disallowedStatesToTransition_1.length; _i++) {\n      var disallowedState = disallowedStatesToTransition_1[_i];\n\n      if (newState === disallowedState) {\n        throw \"Cannot transition from \" + this.state + \" to \" + newState;\n      }\n    }\n  };\n\n  return StateManagerImpl;\n}();\n\nvar StateManagerProxy = function () {\n  function StateManagerProxy(stateManager) {\n    this.stateManager = stateManager;\n  }\n\n  StateManagerProxy.prototype.startTransition = function (newState) {\n    return this.stateManager.startTransition(newState);\n  };\n\n  StateManagerProxy.prototype.directTransition = function (newState) {\n    this.stateManager.directTransition(newState);\n  };\n\n  StateManagerProxy.prototype.getState = function () {\n    return this.stateManager.getState();\n  };\n\n  StateManagerProxy.prototype.canScanFile = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.NOT_STARTED;\n  };\n\n  StateManagerProxy.prototype.isScanning = function () {\n    return this.stateManager.getState() !== Html5QrcodeScannerState.NOT_STARTED;\n  };\n\n  StateManagerProxy.prototype.isStrictlyScanning = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.SCANNING;\n  };\n\n  StateManagerProxy.prototype.isPaused = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.PAUSED;\n  };\n\n  return StateManagerProxy;\n}();\n\nexport { StateManagerProxy };\n\nvar StateManagerFactory = function () {\n  function StateManagerFactory() {}\n\n  StateManagerFactory.create = function () {\n    return new StateManagerProxy(new StateManagerImpl());\n  };\n\n  return StateManagerFactory;\n}();\n\nexport { StateManagerFactory };","map":{"version":3,"mappings":"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","names":["Html5QrcodeScannerState","NOT_STARTED","UNKNOWN","StateManagerImpl","newState","failIfTransitionOngoing","validateTransition","state","onGoingTransactionNewState","tempNewState","directTransition","failIfNewStateIs","PAUSED","SCANNING","disallowedStatesToTransition","_i","disallowedState","stateManager","StateManagerProxy","startTransition","getState","StateManagerFactory"],"sources":["../../src/state-manager.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}